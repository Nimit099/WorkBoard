<template>
	<div style="width:0px; height:0px">
		<c-home></c-home>
	</div>
	<template if:true={viewboard}>
		<template if:true={toast1}>
			<c-toast></c-toast>
		</template>
		<div class="viewboard">
			<!-- header -->
			<div class="header">
				<div class="headerinput">
					<lightning-input type="search" variant="standard" name="name" value={searchkey} onchange={search}
						placeholder="Search here..."></lightning-input>
				</div>
				<div class="headerlogo">
				</div>
				<div class="headerbutton">
					<div class="createbutton" onclick={createticket}></span> Create Ticket</div>
					<div class="usericon recycle">
						<lightning-icon icon-name='standard:recycle_bin' onclick={recycleaction}
							alternative-text='recycle_bin' size='large' title='recycle_bin'></lightning-icon>
					</div>
				</div>
			</div>
			<!-- header ends -->

			<div class="body">
				<template if:true={fieldsfound}>
					<template for:each={boarddata} for:item="field" for:index="index">
						<div class="fields" data-id={field.field.Id} key={field.field.Id} ondrop={dropzone}
							ondragover={dragover}>
							<div class="fieldheader">
								<div class="fieldname">{field.field.Name}</div>
							</div>
							<div class="fieldbody">
								<div class="scrollableclass">
									<template for:each={field.ticket} for:item="ticket">
										<div class="ticket" data-id={ticket.Id} draggable="true" key={ticket.Id}
											ondragstart={dragstart} onclick={openticket}>
											<div class="ticketheader">
												<div class="ticketnumber">
													<div>
														{ticket.TicketNumber__c}
													</div>
													<div class="ticketstartdate">
														<!-- {ticket.CreatedDate} -->
														<lightning-formatted-date-time value={ticket.CreatedDate}></lightning-formatted-date-time>
													</div>
												</div>
												<div class="ticketname">
													{ticket.Name}
												</div>
											</div>
											<div class="ticketfooter">
												<div class="ticketuser" data-type="delete">
													<lightning-button-icon onclick={deleteticket} data-type="delete"
														data-name={ticket.Name} data-id={ticket.Id} variant="base"
														size="medium" icon-name="utility:delete"
														alternative-text="delete"></lightning-button-icon>
												</div>
												<div class="ticketpriority">
													<u>{ticket.TicketPriority__c}</u>
												</div>
											</div>
										</div>
									</template>
								</div>
							</div>
						</div>
					</template>
				</template>
				<template if:false={fieldsfound}>
					<div class="norecordfound">
						<div class="desertImg" aria-hidden="true">
							<img src="/img/chatter/Desert.svg" class="imgclass" alt="test"/>
							<h3 class="slds-text-heading_medium h3class">No Fields found</h3>
						</div>
					</div>
				</template>
			</div>
		</div>
	</template>
	<template if:true={deletemodal}>
		<c-deletepopup boardid={ticketId} boardname={ticketName} type="ticket" onclosedelete={deleteticket}>
		</c-deletepopup>
	</template>
	<template if:true={isRecyclemodal}>
		<c-recyclepopup recyclelist={deletedticketlist} oncloserecycle={recycleaction} onrestoreticket={restoreticket}
			type="Ticket">
		</c-recyclepopup>
	</template>
	<template if:true={openticketmodal}>
		<c-ticketpopup oncloseticketpopup={openticket} ticketpopupdata={ticketpopupdata}></c-ticketpopup>
	</template>
	<template if:true={isShowModal}>
		<section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true"
			aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open">
			<div class="slds-modal__container">
				<template if:true={toast2}>
					<c-toast></c-toast>
				</template>
				<!-- modal header start -->
				<div class="ctfullpopup">
					<!-- modal header start -->
					<div class="ctheaderpopup"> Create Ticket</div>
					<div class="ctbodypopups">
						<div class="ctbodypopup">
							<div class="ctfields">
								<label><span style="color:red; ">*</span>Ticket Number</label>
								<div class="ctpopufields">
									<lightning-input type="text" variant="standard" value={number} data-name="Number"
										onchange={handleinputaction} placeholder="Ticket Number"></lightning-input>
								</div>
							</div>
							<div class="ctfields">
								<label><span style="color:red; ">*</span>Ticket Name</label>
								<div class="ctpopufields">
									<lightning-input type="text" variant="standard" data-name="Name"
										onchange={handleinputaction} value={name} placeholder="Ticket Name">
									</lightning-input>
								</div>
							</div>
							<div class="ctfields">
								<label>Description</label>
								<div class="ctpopufields">
									<lightning-textarea type="text" variant="standard" value={description}
										data-name="Description" onchange={handleinputaction}
										placeholder="Ticket Description"></lightning-textarea>
								</div>
							</div>
						</div>

						<div class="ctbodypopup">
							<div class="ctfields">
								<label>Start Date</label>
								<div class="ctpopufields">
									<lightning-input type="Date" variant="standard" value={startdate}
										data-name="StartDate" onchange={handleinputaction} placeholder="Start Date">
									</lightning-input>
								</div>
							</div>
							<div class="ctfields">
								<label>End Date</label>
								<div class="ctpopufields">
									<lightning-input type="Date" variant="standard" data-name="EndDate"
										onchange={handleinputaction} value={enddate} placeholder="End Date">
									</lightning-input>
								</div>
							</div>
							<div class="ctfields">
								<label>Priority</label>
								<div class="ctpopufields">
									<lightning-combobox data-name="Priority" value={priority}
										placeholder="Select Priortiy" options={options} onchange={handleinputaction}>
									</lightning-combobox>
								</div>
							</div>
						</div>
					</div>


					<div class="ctfooterpopup">
						<div class="ctcreatebutton ctpopupbutton" data-name="Cancel" onclick={handleticketaction}>
							Cancel
						</div>
						<div class="ctcreatebutton ctpopupbutton" data-name="Save" onclick={handleticketaction}>
							Save
						</div>
						<div class="ctcreatebutton ctpopupbutton" data-name="SaveNew" onclick={handleticketaction}>
							Save &
							New
						</div>
					</div>
				</div>
			</div>
		</section>
		<div class="slds-backdrop slds-backdrop_open"></div>
	</template>
	<!-- modal end -->

</template>